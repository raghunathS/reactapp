{
  "version": 3,
  "sources": ["../../@cloudscape-design/component-toolkit/internal/analytics-metadata/attributes.js", "../../src/internal/analytics/selectors.ts", "../../src/internal/utils/scrollable-containers.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getGlobalFlag } from '../global-flags';\nexport const METADATA_DATA_ATTRIBUTE = 'awsuiAnalytics';\nexport const METADATA_ATTRIBUTE = 'data-awsui-analytics';\nexport const LABEL_DATA_ATTRIBUTE = 'awsuiAnalyticsLabel';\nexport const REFERRER_DATA_ATTRIBUTE = 'awsuiReferrerId';\nexport const REFERRER_ATTRIBUTE = 'data-awsui-referrer-id';\nconst LABEL_ATTRIBUTE = 'data-awsui-analytics-label';\nlet activated = getGlobalFlag('analyticsMetadata');\nexport const activateAnalyticsMetadata = (active) => {\n    activated = active;\n};\nexport const getAnalyticsMetadataAttribute = (metadata) => activated\n    ? {\n        [METADATA_ATTRIBUTE]: JSON.stringify(metadata),\n    }\n    : {};\nexport const copyAnalyticsMetadataAttribute = (props) => activated\n    ? {\n        [METADATA_ATTRIBUTE]: props[METADATA_ATTRIBUTE],\n    }\n    : {};\nexport const getAnalyticsLabelAttribute = (labelIdentifierString) => activated\n    ? {\n        [LABEL_ATTRIBUTE]: labelIdentifierString,\n    }\n    : {};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DATA_ATTR_FUNNEL = 'data-analytics-funnel';\nexport const DATA_ATTR_FUNNEL_INTERACTION_ID = `${DATA_ATTR_FUNNEL}-interaction-id`;\nexport const DATA_ATTR_FUNNEL_KEY = `${DATA_ATTR_FUNNEL}-key`;\nexport const DATA_ATTR_FUNNEL_VALUE = `${DATA_ATTR_FUNNEL}-value`;\nexport const DATA_ATTR_FUNNEL_STEP = `${DATA_ATTR_FUNNEL}-step`;\nexport const DATA_ATTR_FUNNEL_SUBSTEP = `${DATA_ATTR_FUNNEL}-substep`;\nexport const DATA_ATTR_RESOURCE_TYPE = `${DATA_ATTR_FUNNEL}-resource-type`;\nexport const DATA_ATTR_MODAL_ID = 'data-analytics-modal-id';\n\nexport const DATA_ATTR_FIELD_LABEL = 'data-analytics-field-label';\nexport const DATA_ATTR_FIELD_ERROR = 'data-analytics-field-error';\n\nexport const DATA_ATTR_ANALYTICS_ALERT = 'data-analytics-alert';\nexport const DATA_ATTR_ANALYTICS_FLASHBAR = 'data-analytics-flashbar';\nexport const DATA_ATTR_ANALYTICS_SUPPRESS_FLOW_EVENTS = 'data-analytics-suppress-flow-events';\n\nexport const FUNNEL_KEY_FUNNEL_NAME = 'funnel-name';\nexport const FUNNEL_KEY_STEP_NAME = 'step-name';\nexport const FUNNEL_KEY_SUBSTEP_NAME = 'substep-name';\n\nexport const getFunnelNameSelector = () => `[${DATA_ATTR_FUNNEL_KEY}=\"${FUNNEL_KEY_FUNNEL_NAME}\"]`;\nexport const getFunnelKeySelector = (key: string) => `[${DATA_ATTR_FUNNEL_KEY}=\"${key}\"]`;\nexport const getFunnelValueSelector = (value: string) => `[${DATA_ATTR_FUNNEL_VALUE}=\"${value}\"]`;\n\nexport const getSubStepAllSelector = () => `[${DATA_ATTR_FUNNEL_SUBSTEP}]`;\nexport const getSubStepSelector = (subStepId: string) => `[${DATA_ATTR_FUNNEL_SUBSTEP}=\"${subStepId}\"]`;\nexport const getSubStepNameSelector = (subStepId?: string) =>\n  [subStepId ? getSubStepSelector(subStepId) : '', `[${DATA_ATTR_FUNNEL_KEY}=\"${FUNNEL_KEY_SUBSTEP_NAME}\"]`].join(' ');\n\nexport const getFieldSlotSeletor = (id: string | undefined) => (id ? `[id=\"${id}\"]` : undefined);\n\nexport const getTextFromSelector = (selector: string | undefined): string | undefined =>\n  selector ? document.querySelector<HTMLElement>(selector)?.textContent?.trim() : undefined;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\n\nexport interface BoundingBox {\n  blockSize: number;\n  inlineSize: number;\n  insetBlockStart: number;\n  insetInlineStart: number;\n}\n\nexport const getOverflowParents = (element: HTMLElement): HTMLElement[] => {\n  const parents = [];\n  let node: HTMLElement | null = element;\n\n  while ((node = node.parentElement) && node !== element.ownerDocument.body) {\n    if (getComputedStyle(node).overflow !== 'visible') {\n      parents.push(node);\n    }\n  }\n  return parents;\n};\n\nexport const getOverflowParentDimensions = ({\n  element,\n  excludeClosestParent = false,\n  expandToViewport = false,\n  canExpandOutsideViewport = false,\n}: {\n  element: HTMLElement;\n  excludeClosestParent: boolean;\n  expandToViewport: boolean;\n  canExpandOutsideViewport: boolean;\n}): BoundingBox[] => {\n  const parents = expandToViewport\n    ? []\n    : getOverflowParents(element).map(el => {\n        const { height, width, top, left } = el.getBoundingClientRect();\n        return {\n          // Treat the whole scrollable area as the available height\n          // if we're allowed to expand past the viewport.\n          blockSize: canExpandOutsideViewport ? el.scrollHeight : height,\n          inlineSize: width,\n          insetBlockStart: top,\n          insetInlineStart: left,\n        };\n      });\n\n  if (canExpandOutsideViewport && !expandToViewport) {\n    const document = element.ownerDocument;\n    const documentDimensions = document.documentElement.getBoundingClientRect();\n    parents.push({\n      inlineSize: Math.max(documentDimensions.width, document.documentElement.clientWidth),\n      blockSize: Math.max(documentDimensions.height, document.documentElement.clientHeight),\n      insetBlockStart: documentDimensions.top,\n      insetInlineStart: documentDimensions.left,\n    });\n  } else {\n    const owningWindow = element.ownerDocument.defaultView ?? window;\n    parents.push({\n      blockSize: owningWindow.visualViewport?.height ?? owningWindow.innerHeight,\n      inlineSize: owningWindow.visualViewport?.width ?? owningWindow.innerWidth,\n      insetBlockStart: 0,\n      insetInlineStart: 0,\n    });\n  }\n\n  if (excludeClosestParent && !expandToViewport) {\n    parents.shift();\n  }\n\n  return parents;\n};\n\ntype ScrollIntoViewOptions = Parameters<HTMLElement['scrollIntoView']>[0];\n\n/**\n * Calls `scrollIntoView` on the provided element with sensible defaults. If\n * the element does not exist or does not support the `scrollIntoView`\n * method, it will do nothing. This wrapper is created to support environments\n * where the native function is not available like JSDom (feature request:\n * https://github.com/jsdom/jsdom/issues/1422).\n *\n * @param element to be scrolled into view\n * @param options native options for `scrollIntoView`\n */\nexport function scrollElementIntoView(\n  element: HTMLElement | undefined,\n  options: ScrollIntoViewOptions = { block: 'nearest', inline: 'nearest' }\n) {\n  element?.scrollIntoView?.(options);\n}\n\nexport function calculateScroll({ insetBlockStart, blockSize }: BoundingBox) {\n  if (insetBlockStart < 0) {\n    return insetBlockStart;\n  } else if (insetBlockStart + blockSize > window.innerHeight) {\n    if (blockSize > window.innerHeight) {\n      return insetBlockStart;\n    } else {\n      return insetBlockStart + blockSize - window.innerHeight;\n    }\n  }\n  return 0;\n}\n\n/**\n * For elements with fixed position, the browser's native scrollIntoView API doesn't work,\n * so we need to manually scroll to the element's position.\n * Supports only vertical scrolling.\n */\nexport function scrollRectangleIntoView(box: BoundingBox, scrollableParent?: HTMLElement) {\n  const scrollAmount = calculateScroll(box);\n  if (scrollAmount) {\n    (scrollableParent || window).scrollBy(0, scrollAmount);\n  }\n}\n\nexport function getFirstScrollableParent(element: HTMLElement): HTMLElement | undefined {\n  return (\n    findUpUntil(element, el => {\n      const overflows = el.scrollHeight > el.clientHeight;\n      return overflows && ['scroll', 'auto'].includes(getComputedStyle(el).overflowY);\n    }) || undefined\n  );\n}\n"],
  "mappings": "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",
  "names": ["document"]
}
